(window["webpackJsonpmy-movie-lists"]=window["webpackJsonpmy-movie-lists"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),c=a(12),o=a.n(c),l=a(29),r=a(26),s=a(68),m=a(76),d=a(44),v=a(164);const E=Object(v.a)({ADD_LIST:()=>({id:Date.now()}),RENAME_LIST:(e,t)=>({id:e,label:t}),DELETE_LIST:e=>({id:e}),SET_ACTIVE_LIST:e=>({id:e}),ADD_MOVIE_TO_ACTIVE_LIST:e=>({movieId:e}),REMOVE_MOVIE_FROM_ACTIVE_LIST:e=>({movieId:e}),MOVE_MOVIE_UP_IN_ACTIVE_LIST:e=>({movieId:e}),MOVE_MOVIE_DOWN_IN_ACTIVE_LIST:e=>({movieId:e})}),u=E.addList,b=E.addMovieToActiveList,h=E.deleteList,p=E.moveMovieDownInActiveList,g=E.moveMovieUpInActiveList,y=E.removeMovieFromActiveList,I=E.renameList,O=E.setActiveList,f=Date.now(),S={items:[{id:f,label:"Favourites",movies:["tt0111161"]},{id:2,label:"Watchlist",movies:[]}],active:f};var k=Object(d.a)((e=S,t)=>{const a=t.payload,i=t.type,n=e.items.find(t=>t.id===e.active);switch(i){case u.toString():e.active=a.id,e.items.push({id:a.id,label:"",movies:[]});break;case I.toString():e.items.find(e=>e.id===a.id).label=a.label;break;case h.toString():e.items=e.items.filter(e=>e.id!==a.id),e.active===a.id&&(e.active=e.items.length?e.items[0].id:void 0);break;case O.toString():e.active=a.id;break;case b.toString():n.movies.every(e=>e!==a.movieId)&&n.movies.push(a.movieId);break;case y.toString():n.movies=n.movies.filter(e=>e!==a.movieId);break;case g.toString():{const e=n.movies,t=e.indexOf(a.movieId);n.movies=0===t?[...e.slice(1),e[0]]:[...e.slice(0,t-1),e[t],e[t-1],...e.slice(t+1)];break}case p.toString():{const e=n.movies,t=e.indexOf(a.movieId);t===e.length-1?n.movies=[e[e.length-1],...e.slice(0,-1)]:n.movies=[...e.slice(0,t),e[t+1],e[t],...e.slice(t+2)];break}default:return e}});const w=Object(v.a)({SET_IS_SEARCH_FETCHING:e=>({isFetching:e}),MOVIE_SEARCH_RESULT_RECEIVED:(e,t)=>({key:e,movies:t}),MOVIE_RECEIVED:e=>({movie:e}),SET_SEARCH_VALUE:e=>({value:e}),FETCH_MOVIE:e=>({id:e})}),j=w.fetchMovie,L=w.movieReceived,D=w.movieSearchResultReceived,_=w.setIsSearchFetching,C=w.setSearchValue,M={items:{tt0111161:{poster:"https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",title:"The Shawshank Repemption",year:"1994",genre:"Drama",imdbId:"tt0111161",rating:"9.3"}},searchKeys:{},currentSearchValue:"",isSearchFetching:!1};var T=Object(d.a)((e=M,t)=>{const a=t.payload;switch(t.type){case _.toString():e.isSearchFetching=a.isFetching;break;case D.toString():e.searchKeys[a.key]=a.movies;break;case L.toString():e.items[a.movie.imdbId]=a.movie;break;case C.toString():e.currentSearchValue=a.value;break;default:return e}}),N=Object(r.c)({lists:k,movies:T}),V=a(18);const A=e=>window.fetch(e).then(e=>e.ok?e.json():Promise.reject(e)),F=e=>({genre:e.Genre,imdbId:e.imdbID,poster:e.Poster,rating:e.imdbRating,title:e.Title,year:e.Year}),R=e=>A("https://www.omdbapi.com/?apikey=".concat("de26953c","&type=movie&s=").concat(e)).then(({Search:e})=>e?e.map(F):[]),x=e=>A("https://www.omdbapi.com/?apikey=".concat("de26953c","&type=movie&i=").concat(e)).then(F);var P=a(69);const B=e=>e.lists.items,H=e=>e.lists.active,U=e=>e.movies.items,z=Object(P.a)(B,H,U,(e,t,a)=>void 0===t?[]:e.find(({id:e})=>e===t).movies.map(e=>{return a[e]||{imdbId:e}})),G=(e,{key:t})=>e.movies.searchKeys[t],W=e=>e.movies.currentSearchValue,X=e=>{const t=W(e),a=G(e,{key:t.trim()});return a?a.map(({title:e,year:t,imdbId:a})=>({value:a,label:"".concat(e," (").concat(t,")")})):[]},Y=e=>e.movies.isSearchFetching;function*K(e){const t=e.payload.value.trim(),a=G(yield Object(V.f)(),{key:t});if(t.length<3||a)yield Object(V.d)(_(!1));else if(yield Object(V.d)(_(!0)),!(yield Object(V.e)({cancel:Object(V.g)(e.type),timeout:Object(V.c)(400)})).cancel)try{const e=yield Object(V.b)(R,t);yield Object(V.d)(D(t,e))}catch(i){console.error(i)}finally{yield Object(V.d)(_(!1))}}function*Z(){yield Object(V.h)(C.toString(),K)}function*$(e){const t=e.payload.id;if(yield Object(V.d)(b(t)),!U(yield Object(V.f)())[t])try{const e=yield Object(V.b)(x,t);yield Object(V.d)(L(e))}catch(a){console.error(a)}}function*J(){yield Object(V.h)(j.toString(),$)}function*q(){yield Object(V.a)([Z(),J()])}var Q=e=>{const t=Object(m.a)(),a=Object(s.createLogger)({collapsed:!0}),i=Object(r.e)(N,e,Object(r.a)(t,a));return t.run(q),i},ee=a(70),te=a(158),ae=a(163),ie=a(160),ne=a(157),ce=a(161),oe=a(151),le=a(159),re=a(41),se=a(142),me=a(143);var de=({children:e})=>{const t=Object(se.a)();return n.a.createElement(me.a,{appear:!1,direction:"down",in:!t},e)},ve=a(71),Ee=a.n(ve),ue=a(150),be=a(147),he=a(101),pe=a(47),ge=a.n(pe),ye=a(145),Ie=a(149),Oe=a(148),fe=a(162);const Se=Object(ee.a)(()=>({item:{height:48,"&:hover $deleteButton":{opacity:1}},button:{height:48},activeItem:{backgroundColor:"#EDEDED"},edit:{width:"100%"},textField:{margin:0,width:"100%"},input:{"&::before":{borderBottomColor:"transparent"}},deleteButton:{opacity:0,"&:focus":{opacity:1}}}));var ke=({active:e,deleteList:t,isNewItem:a,label:c,renameList:o,setActiveList:l})=>{const r=Se(),s=Object(i.useRef)(null);Object(i.useEffect)(()=>{s&&s.current&&a&&s.current.focus()});return n.a.createElement(ye.a,{button:!e,ContainerProps:{className:"".concat(r.item," ").concat(e?r.activeItem:"")},classes:{button:r.button},onClick:e?void 0:l},e?n.a.createElement(ae.a,{className:r.edit},n.a.createElement(fe.a,{className:r.textField,InputProps:{className:r.input},inputRef:s,onChange:e=>o(e.target.value),placeholder:"(new list)",value:c})):n.a.createElement(Oe.a,{primary:c||"(new list)"}),n.a.createElement(Ie.a,null,n.a.createElement(ue.a,{"aria-label":"delete",className:r.deleteButton,edge:"end",onClick:t},n.a.createElement(ge.a,null))))};const we=Object(ee.a)(()=>({header:{display:"flex",justifyContent:"space-between",alignItems:"center"}})),je=({activeList:e,addList:t,deleteList:a,lists:c,renameList:o,setActiveList:l})=>{const r=we(),s=Object(i.useRef)();return Object(i.useEffect)(()=>{s.current=c}),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:r.header},n.a.createElement(re.a,{variant:"subtitle1"},"My lists"),n.a.createElement(ue.a,{color:"primary",onClick:t},n.a.createElement(Ee.a,null))),n.a.createElement(he.a,null,n.a.createElement(be.a,{component:"nav"},c.map(({id:t,label:i})=>n.a.createElement(ke,{key:t,active:t===e,deleteList:()=>a(t),id:t,isNewItem:Boolean(s&&s.current&&s.current.every(e=>e.id!==t)),label:i,renameList:e=>o(t,e),setActiveList:()=>l(t)})))))};je.defaultProps={activeList:void 0};const Le={addList:u,deleteList:h,renameList:I,setActiveList:O};var De=Object(l.b)(e=>({activeList:H(e),lists:B(e)}),Le)(je),_e=a(73),Ce=a.n(_e),Me=a(72),Te=a.n(Me),Ne=a(152),Ve=a(156),Ae=a(155),Fe=a(153),Re=a(154);const xe=Object(ee.a)(()=>({root:{overflow:"auto"},row:{height:96,"&:hover":{backgroundColor:"#EDEDED"},"&:focus-within":{backgroundColor:"#EDEDED"},"&:hover $icons":{opacity:1,backgroundColor:"#EDEDED"},"&:focus-within $icons":{opacity:1,backgroundColor:"#EDEDED"}},loading:{opacity:.4,backgroundColor:"rgba(0, 0, 0, .2)"},cell:{padding:"8px 12px"},button:{padding:6},iconCell:{position:"relative",overflow:"hidden"},icons:{position:"absolute",left:0,transform:"translate(0, calc(-50% - 1em + 4px))",display:"flex",flexDirection:"column",opacity:0}})),Pe={moveDown:p,moveUp:g,remove:y};var Be=Object(l.b)(e=>({movies:z(e)}),Pe)(({moveDown:e,moveUp:t,movies:a,remove:i})=>{const c=xe(),o=[{header:"#",className:c.iconCell,content:(a,o)=>n.a.createElement(n.a.Fragment,null,o+1,n.a.createElement("div",{className:c.icons},n.a.createElement(ue.a,{className:c.button,onClick:()=>t(a.imdbId)},n.a.createElement(Te.a,{fontSize:"small"})),n.a.createElement(ue.a,{className:c.button,onClick:()=>i(a.imdbId)},n.a.createElement(ge.a,{fontSize:"small"})),n.a.createElement(ue.a,{className:c.button,onClick:()=>e(a.imdbId)},n.a.createElement(Ce.a,{fontSize:"small"}))))},{header:"Poster",content:e=>n.a.createElement("img",{src:e.poster,alt:"",width:"50"})},{header:"Title",content:e=>e.title},{header:"Year",content:e=>e.year},{header:"Genre",content:e=>e.genre},{header:"IMDb",content:e=>n.a.createElement(oe.a,{href:"https://www.imdb.com/title/".concat(e.imdbId,"/")},e.imdbId)},{header:"Rating",content:e=>e.rating}];return n.a.createElement(he.a,{className:c.root},n.a.createElement(Ne.a,{stickyHeader:!0},n.a.createElement(Fe.a,null,n.a.createElement(Re.a,null,o.map(({header:e})=>n.a.createElement(Ae.a,{key:e,className:c.cell},e)))),n.a.createElement(Ve.a,null,a.map((e,t)=>n.a.createElement(Re.a,{key:e.imdbId,className:"".concat(c.row," ").concat(void 0===e.title?c.loading:"")},o.map(({className:a,content:i,header:o})=>n.a.createElement(Ae.a,{key:o,className:"".concat(c.cell," ").concat(a||"")},i(e,t))))))))}),He=a(75);const Ue={fetchMovie:j,setValue:C};var ze=Object(l.b)(e=>({isLoading:Y(e),options:X(e),value:W(e)}),Ue)(({fetchMovie:e,isLoading:t,options:a,setValue:i,value:c})=>{return n.a.createElement(ae.a,{my:2},n.a.createElement(He.a,{filterOption:null,isLoading:t,onChange:t=>{e(t.value)},onInputChange:e=>{i(e)},options:a,placeholder:"Add a movie",value:c}))});const Ge=Object(ee.a)(()=>({content:{minHeight:"calc(100vh - ".concat(40,"px)")},footer:{height:40,display:"flex",justifyContent:"center",alignItems:"center"}}));var We=()=>{const e=Ge();return n.a.createElement(n.a.Fragment,null,n.a.createElement(ne.a,null),n.a.createElement(de,null,n.a.createElement(te.a,null,n.a.createElement(le.a,null,n.a.createElement(re.a,{variant:"h6"},"My movie lists")))),n.a.createElement("div",{className:e.content},n.a.createElement(le.a,null),n.a.createElement(ie.a,null,n.a.createElement(ae.a,{my:2},n.a.createElement(ce.a,{container:!0,spacing:3},n.a.createElement(ce.a,{item:!0,xs:12,md:4,lg:3},n.a.createElement(De,null)),n.a.createElement(ce.a,{item:!0,xs:12,md:8,lg:9},n.a.createElement(Be,null),n.a.createElement(ze,null)))))),n.a.createElement("div",{className:e.footer},n.a.createElement("p",null,"The site uses ",n.a.createElement(oe.a,{href:"http://www.omdbapi.com/"},"OMDb API"),".")))};const Xe=Q();o.a.render(n.a.createElement(l.a,{store:Xe},n.a.createElement(We,null)),document.getElementById("root"))},87:function(e,t,a){e.exports=a(100)}},[[87,1,2]]]);
//# sourceMappingURL=main.98148d97.chunk.js.map