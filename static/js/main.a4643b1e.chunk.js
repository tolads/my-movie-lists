(this["webpackJsonpmy-movie-lists"]=this["webpackJsonpmy-movie-lists"]||[]).push([[0],{101:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(12),c=n.n(i),o=n(28),s=n(24),l=n(75),u=n(36),m=n(47),d=n(165),v=Object(d.a)({ADD_LIST:function(){return{id:Date.now()}},RENAME_LIST:function(e,t){return{id:e,label:t}},DELETE_LIST:function(e){return{id:e}},SET_ACTIVE_LIST:function(e){return{id:e}},ADD_MOVIE_TO_ACTIVE_LIST:function(e){return{movieId:e}},REMOVE_MOVIE_FROM_ACTIVE_LIST:function(e){return{movieId:e}},MOVE_MOVIE_UP_IN_ACTIVE_LIST:function(e){return{movieId:e}},MOVE_MOVIE_DOWN_IN_ACTIVE_LIST:function(e){return{movieId:e}}}),f=v.addList,b=v.addMovieToActiveList,E=v.deleteList,p=v.moveMovieDownInActiveList,h=v.moveMovieUpInActiveList,g=v.removeMovieFromActiveList,O=v.renameList,I=v.setActiveList,k=Date.now(),y={items:[{id:k,label:"Favourites",movies:["tt0111161"]},{id:2,label:"Watchlist",movies:[]}],active:k},w=Object(m.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0,n=t.payload,a=t.type,r=e.items.find((function(t){return t.id===e.active}));switch(a){case f.toString():e.active=n.id,e.items.push({id:n.id,label:"",movies:[]});break;case O.toString():e.items.find((function(e){return e.id===n.id})).label=n.label;break;case E.toString():e.items=e.items.filter((function(e){return e.id!==n.id})),e.active===n.id&&(e.active=e.items.length?e.items[0].id:void 0);break;case I.toString():e.active=n.id;break;case b.toString():r.movies.every((function(e){return e!==n.movieId}))&&r.movies.push(n.movieId);break;case g.toString():r.movies=r.movies.filter((function(e){return e!==n.movieId}));break;case h.toString():var i=r.movies,c=i.indexOf(n.movieId);r.movies=0===c?[].concat(Object(u.a)(i.slice(1)),[i[0]]):[].concat(Object(u.a)(i.slice(0,c-1)),[i[c],i[c-1]],Object(u.a)(i.slice(c+1)));break;case p.toString():var o=r.movies,s=o.indexOf(n.movieId);s===o.length-1?r.movies=[o[o.length-1]].concat(Object(u.a)(o.slice(0,-1))):r.movies=[].concat(Object(u.a)(o.slice(0,s)),[o[s+1],o[s]],Object(u.a)(o.slice(s+2)));break;default:return e}})),j=Object(d.a)({SET_IS_SEARCH_FETCHING:function(e){return{isFetching:e}},MOVIE_SEARCH_RESULT_RECEIVED:function(e,t){return{key:e,movies:t}},MOVIE_RECEIVED:function(e){return{movie:e}},SET_SEARCH_VALUE:function(e){return{value:e}},FETCH_MOVIE:function(e){return{id:e}}}),S=j.fetchMovie,L=j.movieReceived,_=j.movieSearchResultReceived,x=j.setIsSearchFetching,D=j.setSearchValue,C={items:{tt0111161:{poster:"https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",title:"The Shawshank Repemption",year:"1994",genre:"Drama",imdbId:"tt0111161",rating:"9.3"}},searchKeys:{},currentSearchValue:"",isSearchFetching:!1},M=Object(m.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,n=t.payload,a=t.type;switch(a){case x.toString():e.isSearchFetching=n.isFetching;break;case _.toString():e.searchKeys[n.key]=n.movies;break;case L.toString():e.items[n.movie.imdbId]=n.movie;break;case D.toString():e.currentSearchValue=n.value;break;default:return e}})),T=Object(s.c)({lists:w,movies:M}),N=n(23),V=n.n(N),A=n(17),R=Object({NODE_ENV:"production",PUBLIC_URL:"/my-movie-lists"}).REACT_APP_OMDB_API_KEY||"de26953c",F=function(e){return window.fetch(e).then((function(e){return e.ok?e.json():Promise.reject(e)}))},P=function(e){return{genre:e.Genre,imdbId:e.imdbID,poster:e.Poster,rating:e.imdbRating,title:e.Title,year:e.Year}},B=function(e){return F("https://www.omdbapi.com/?apikey=".concat(R,"&type=movie&s=").concat(e)).then((function(e){var t=e.Search;return t?t.map(P):[]}))},U=function(e){return F("https://www.omdbapi.com/?apikey=".concat(R,"&type=movie&i=").concat(e)).then(P)},H=n(68),z=function(e){return e.lists.items},G=function(e){return e.lists.active},W=function(e){return void 0!==G(e)},Y=function(e){return e.movies.items},K=Object(H.a)(z,G,Y,(function(e,t,n){return void 0===t?[]:e.find((function(e){return e.id===t})).movies.map((function(e){return n[e]||{imdbId:e}}))})),X=function(e,t){var n=t.key;return e.movies.searchKeys[n]},Z=function(e){return e.movies.currentSearchValue},$=function(e){var t=Z(e),n=X(e,{key:t.trim()});return n?n.map((function(e){var t=e.title,n=e.year;return{value:e.imdbId,label:"".concat(t," (").concat(n,")")}})):[]},J=function(e){return e.movies.isSearchFetching},q=V.a.mark(ne),Q=V.a.mark(ae),ee=V.a.mark(re),te=V.a.mark(ie);function ne(e){var t,n,a,r;return V.a.wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return t=e.payload.value.trim(),i.t0=X,i.next=4,Object(A.f)();case 4:if(i.t1=i.sent,i.t2={key:t},n=(0,i.t0)(i.t1,i.t2),!(t.length<3||n)){i.next=11;break}return i.next=10,Object(A.d)(x(!1));case 10:return i.abrupt("return");case 11:return i.next=13,Object(A.d)(x(!0));case 13:return i.next=15,Object(A.e)({cancel:Object(A.g)(e.type),timeout:Object(A.c)(400)});case 15:if(a=i.sent,!a.cancel){i.next=19;break}return i.abrupt("return");case 19:return i.prev=19,i.next=22,Object(A.b)(B,t);case 22:return r=i.sent,i.next=25,Object(A.d)(_(t,r));case 25:i.next=30;break;case 27:i.prev=27,i.t3=i.catch(19),console.error(i.t3);case 30:return i.prev=30,i.next=33,Object(A.d)(x(!1));case 33:return i.finish(30);case 34:case"end":return i.stop()}}),q,null,[[19,27,30,34]])}function ae(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.h)(D.toString(),ne);case 2:case"end":return e.stop()}}),Q)}function re(e){var t,n;return V.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return t=e.payload.id,a.next=3,Object(A.d)(b(t));case 3:return a.t0=Y,a.next=6,Object(A.f)();case 6:if(a.t1=a.sent,a.t2=t,!(0,a.t0)(a.t1)[a.t2]){a.next=10;break}return a.abrupt("return");case 10:return a.prev=10,a.next=13,Object(A.b)(U,t);case 13:return n=a.sent,a.next=16,Object(A.d)(L(n));case 16:a.next=21;break;case 18:a.prev=18,a.t3=a.catch(10),console.error(a.t3);case 21:case"end":return a.stop()}}),ee,null,[[10,18]])}function ie(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.h)(S.toString(),re);case 2:case"end":return e.stop()}}),te)}var ce=V.a.mark(oe);function oe(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.a)([ae(),ie()]);case 2:case"end":return e.stop()}}),ce)}var se=function(e){var t=Object(l.a)(),n=s.d,a=Object(s.e)(T,e,n(Object(s.a)(t)));return t.run(oe),a},le=n(69),ue=n(160),me=n(166),de=n(162),ve=n(159),fe=n(163),be=n(153),Ee=n(161),pe=n(44),he=n(143),ge=n(144),Oe=function(e){var t=e.children,n=Object(he.a)();return r.a.createElement(ge.a,{appear:!1,direction:"down",in:!n},t)},Ie=n(70),ke=n.n(Ie),ye=n(152),we=n(149),je=n(102),Se=n(50),Le=n.n(Se),_e=n(147),xe=n(151),De=n(150),Ce=n(164),Me=Object(le.a)((function(){return{item:{height:48,"&:hover $deleteButton":{opacity:1}},button:{height:48},activeItem:{backgroundColor:"#EDEDED"},edit:{width:"100%"},textField:{margin:0,width:"100%"},input:{"&::before":{borderBottomColor:"transparent"}},deleteButton:{opacity:0,"&:focus":{opacity:1}}}})),Te=function(e){var t=e.active,n=e.deleteList,i=e.isNewItem,c=e.label,o=e.renameList,s=e.setActiveList,l=Me(),u=Object(a.useRef)(null);Object(a.useEffect)((function(){u&&u.current&&i&&u.current.focus()}));return r.a.createElement(_e.a,{button:!t,ContainerProps:{className:"".concat(l.item," ").concat(t?l.activeItem:"")},classes:{button:l.button},onClick:t?void 0:s},t?r.a.createElement(me.a,{className:l.edit},r.a.createElement(Ce.a,{className:l.textField,InputProps:{className:l.input},inputRef:u,onChange:function(e){return o(e.target.value)},placeholder:"(new list)",value:c})):r.a.createElement(De.a,{primary:c||"(new list)"}),r.a.createElement(xe.a,null,r.a.createElement(ye.a,{"aria-label":"delete",className:l.deleteButton,"data-test-id":"delete-btn",edge:"end",onClick:n},r.a.createElement(Le.a,null))))},Ne=Object(le.a)((function(){return{header:{display:"flex",justifyContent:"space-between",alignItems:"center"}}})),Ve=function(e){var t=e.activeList,n=e.addList,i=e.deleteList,c=e.lists,o=e.renameList,s=e.setActiveList,l=Ne(),u=Object(a.useRef)();return Object(a.useEffect)((function(){u.current=c})),r.a.createElement(a.Fragment,null,r.a.createElement("div",{className:l.header},r.a.createElement(pe.a,{variant:"subtitle1"},"My lists"),r.a.createElement(ye.a,{color:"primary","data-test-id":"create-list-btn",onClick:n},r.a.createElement(ke.a,null))),r.a.createElement(je.a,null,r.a.createElement(we.a,{component:"nav","data-test-id":"lists-list"},c.map((function(e){var n=e.id,a=e.label;return r.a.createElement(Te,{key:n,active:n===t,deleteList:function(){return i(n)},id:n,isNewItem:Boolean(u&&u.current&&u.current.every((function(e){return e.id!==n}))),label:a,renameList:function(e){return o(n,e)},setActiveList:function(){return s(n)}})})))))};Ve.defaultProps={activeList:void 0};var Ae={addList:f,deleteList:E,renameList:O,setActiveList:I},Re=Object(o.b)((function(e){return{activeList:G(e),lists:z(e)}}),Ae)(Ve),Fe=n(72),Pe=n.n(Fe),Be=n(71),Ue=n.n(Be),He=n(154),ze=n(158),Ge=n(157),We=n(155),Ye=n(156),Ke=Object(le.a)((function(){return{root:{overflow:"auto"},row:{height:96,"&:hover":{backgroundColor:"#EDEDED"},"&:focus-within":{backgroundColor:"#EDEDED"},"&:hover $icons":{opacity:1,backgroundColor:"#EDEDED"},"&:focus-within $icons":{opacity:1,backgroundColor:"#EDEDED"}},loading:{opacity:.4,backgroundColor:"rgba(0, 0, 0, .2)"},cell:{padding:"8px 12px"},button:{padding:6},iconCell:{position:"relative",overflow:"hidden"},icons:{position:"absolute",left:0,transform:"translate(0, calc(-50% - 1em + 4px))",display:"flex",flexDirection:"column",opacity:0}}})),Xe={moveDown:p,moveUp:h,remove:g},Ze=Object(o.b)((function(e){return{movies:K(e)}}),Xe)((function(e){var t=e.moveDown,n=e.moveUp,i=e.movies,c=e.remove,o=Ke(),s=[{header:"#",className:o.iconCell,content:function(e,i){return r.a.createElement(a.Fragment,null,i+1,r.a.createElement("div",{className:o.icons},r.a.createElement(ye.a,{className:o.button,"data-test-id":"move-up-btn",onClick:function(){return n(e.imdbId)}},r.a.createElement(Ue.a,{fontSize:"small"})),r.a.createElement(ye.a,{className:o.button,"data-test-id":"remove-btn",onClick:function(){return c(e.imdbId)}},r.a.createElement(Le.a,{fontSize:"small"})),r.a.createElement(ye.a,{className:o.button,"data-test-id":"move-down-btn",onClick:function(){return t(e.imdbId)}},r.a.createElement(Pe.a,{fontSize:"small"}))))}},{header:"Poster",content:function(e){return r.a.createElement("img",{src:e.poster,alt:"",width:"50"})}},{header:"Title",content:function(e){return e.title}},{header:"Year",content:function(e){return e.year}},{header:"Genre",content:function(e){return e.genre}},{header:"IMDb",content:function(e){return r.a.createElement(be.a,{href:"https://www.imdb.com/title/".concat(e.imdbId,"/")},e.imdbId)}},{header:"Rating",content:function(e){return e.rating}}];return r.a.createElement(je.a,{className:o.root},r.a.createElement(He.a,{"data-test-id":"movies-table",stickyHeader:!0},r.a.createElement(We.a,null,r.a.createElement(Ye.a,null,s.map((function(e){var t=e.header;return r.a.createElement(Ge.a,{key:t,className:o.cell},t)})))),r.a.createElement(ze.a,null,i.map((function(e,t){return r.a.createElement(Ye.a,{key:e.imdbId,className:"".concat(o.row," ").concat(void 0===e.title?o.loading:"")},s.map((function(n){var a=n.className,i=n.content,c=n.header;return r.a.createElement(Ge.a,{key:c,className:"".concat(o.cell," ").concat(a||"")},i(e,t))})))})))))})),$e=n(74),Je={fetchMovie:S,setValue:D},qe=Object(o.b)((function(e){return{showSearch:W(e),isLoading:J(e),options:$(e),value:Z(e)}}),Je)((function(e){var t=e.fetchMovie,n=e.showSearch,a=e.isLoading,i=e.options,c=e.setValue,o=e.value;return n?r.a.createElement(me.a,{my:2,"data-test-id":"search-container"},r.a.createElement($e.a,{filterOption:null,isLoading:a,onChange:function(e){t(e.value)},onInputChange:function(e){c(e)},options:i,placeholder:"Add a movie",value:o})):null})),Qe=Object(le.a)((function(){return{content:{minHeight:"calc(100vh - ".concat(40,"px)")},footer:{height:40,display:"flex",justifyContent:"center",alignItems:"center"}}})),et=function(){var e=Qe();return r.a.createElement(a.Fragment,null,r.a.createElement(ve.a,null),r.a.createElement(Oe,null,r.a.createElement(ue.a,null,r.a.createElement(Ee.a,null,r.a.createElement(pe.a,{variant:"h6"},"My movie lists")))),r.a.createElement("div",{className:e.content},r.a.createElement(Ee.a,null),r.a.createElement(de.a,null,r.a.createElement(me.a,{my:2},r.a.createElement(fe.a,{container:!0,spacing:3},r.a.createElement(fe.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Re,null)),r.a.createElement(fe.a,{item:!0,xs:12,md:8,lg:9},r.a.createElement(Ze,null),r.a.createElement(qe,null)))))),r.a.createElement("div",{className:e.footer},r.a.createElement("p",null,"The site uses ",r.a.createElement(be.a,{href:"http://www.omdbapi.com/"},"OMDb API"),".")))},tt=se();c.a.render(r.a.createElement(o.a,{store:tt},r.a.createElement(et,null)),document.getElementById("root"))},86:function(e,t,n){e.exports=n(101)}},[[86,1,2]]]);
//# sourceMappingURL=main.a4643b1e.chunk.js.map