(this["webpackJsonpmy-movie-lists"]=this["webpackJsonpmy-movie-lists"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(11),i=a.n(c),o=a(28),s=a(25),l=a(74),m=a(36),u=a(46),d=a(165),v=Object(d.a)({ADD_LIST:function(){return{id:Date.now()}},RENAME_LIST:function(e,t){return{id:e,label:t}},DELETE_LIST:function(e){return{id:e}},SET_ACTIVE_LIST:function(e){return{id:e}},ADD_MOVIE_TO_ACTIVE_LIST:function(e){return{movieId:e}},REMOVE_MOVIE_FROM_ACTIVE_LIST:function(e){return{movieId:e}},MOVE_MOVIE_UP_IN_ACTIVE_LIST:function(e){return{movieId:e}},MOVE_MOVIE_DOWN_IN_ACTIVE_LIST:function(e){return{movieId:e}}}),b=v.addList,E=v.addMovieToActiveList,p=v.deleteList,h=v.moveMovieDownInActiveList,f=v.moveMovieUpInActiveList,g=v.removeMovieFromActiveList,O=v.renameList,I=v.setActiveList,k=Date.now(),w={items:[{id:k,label:"Favourites",movies:["tt0111161"]},{id:2,label:"Watchlist",movies:[]}],active:k},y=Object(u.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w,t=arguments.length>1?arguments[1]:void 0,a=t.payload,n=t.type,r=e.items.find((function(t){return t.id===e.active}));switch(n){case b.toString():e.active=a.id,e.items.push({id:a.id,label:"",movies:[]});break;case O.toString():e.items.find((function(e){return e.id===a.id})).label=a.label;break;case p.toString():e.items=e.items.filter((function(e){return e.id!==a.id})),e.active===a.id&&(e.active=e.items.length?e.items[0].id:void 0);break;case I.toString():e.active=a.id;break;case E.toString():r.movies.every((function(e){return e!==a.movieId}))&&r.movies.push(a.movieId);break;case g.toString():r.movies=r.movies.filter((function(e){return e!==a.movieId}));break;case f.toString():var c=r.movies,i=c.indexOf(a.movieId);r.movies=0===i?[].concat(Object(m.a)(c.slice(1)),[c[0]]):[].concat(Object(m.a)(c.slice(0,i-1)),[c[i],c[i-1]],Object(m.a)(c.slice(i+1)));break;case h.toString():var o=r.movies,s=o.indexOf(a.movieId);s===o.length-1?r.movies=[o[o.length-1]].concat(Object(m.a)(o.slice(0,-1))):r.movies=[].concat(Object(m.a)(o.slice(0,s)),[o[s+1],o[s]],Object(m.a)(o.slice(s+2)));break;default:return e}})),j=Object(d.a)({SET_IS_SEARCH_FETCHING:function(e){return{isFetching:e}},MOVIE_SEARCH_RESULT_RECEIVED:function(e,t){return{key:e,movies:t}},MOVIE_RECEIVED:function(e){return{movie:e}},SET_SEARCH_VALUE:function(e){return{value:e}},FETCH_MOVIE:function(e){return{id:e}}}),S=j.fetchMovie,x=j.movieReceived,L=j.movieSearchResultReceived,D=j.setIsSearchFetching,_=j.setSearchValue,C={items:{tt0111161:{poster:"https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",title:"The Shawshank Repemption",year:"1994",genre:"Drama",imdbId:"tt0111161",rating:"9.3"}},searchKeys:{},currentSearchValue:"",isSearchFetching:!1},M=Object(u.a)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:C,t=arguments.length>1?arguments[1]:void 0,a=t.payload,n=t.type;switch(n){case D.toString():e.isSearchFetching=a.isFetching;break;case L.toString():e.searchKeys[a.key]=a.movies;break;case x.toString():e.items[a.movie.imdbId]=a.movie;break;case _.toString():e.currentSearchValue=a.value;break;default:return e}})),T=Object(s.c)({lists:y,movies:M}),N=a(23),V=a.n(N),A=a(17);const F=e=>window.fetch(e).then(e=>e.ok?e.json():Promise.reject(e)),R=e=>({genre:e.Genre,imdbId:e.imdbID,poster:e.Poster,rating:e.imdbRating,title:e.Title,year:e.Year}),P=e=>F("https://www.omdbapi.com/?apikey=".concat("de26953c","&type=movie&s=").concat(e)).then(({Search:e})=>e?e.map(R):[]),B=e=>F("https://www.omdbapi.com/?apikey=".concat("de26953c","&type=movie&i=").concat(e)).then(R);var H=a(67);const U=e=>e.lists.items,z=e=>e.lists.active,G=e=>void 0!==z(e),W=e=>e.movies.items,X=Object(H.a)(U,z,W,(e,t,a)=>void 0===t?[]:e.find(({id:e})=>e===t).movies.map(e=>{return a[e]||{imdbId:e}})),Y=(e,{key:t})=>e.movies.searchKeys[t],K=e=>e.movies.currentSearchValue,Z=e=>{const t=K(e),a=Y(e,{key:t.trim()});return a?a.map(({title:e,year:t,imdbId:a})=>({value:a,label:"".concat(e," (").concat(t,")")})):[]},$=e=>e.movies.isSearchFetching;var J=V.a.mark(te),q=V.a.mark(ae),Q=V.a.mark(ne),ee=V.a.mark(re);function te(e){var t,a,n,r;return V.a.wrap((function(c){for(;;)switch(c.prev=c.next){case 0:return t=e.payload.value.trim(),c.t0=Y,c.next=4,Object(A.f)();case 4:if(c.t1=c.sent,c.t2={key:t},a=(0,c.t0)(c.t1,c.t2),!(t.length<3||a)){c.next=11;break}return c.next=10,Object(A.d)(D(!1));case 10:return c.abrupt("return");case 11:return c.next=13,Object(A.d)(D(!0));case 13:return c.next=15,Object(A.e)({cancel:Object(A.g)(e.type),timeout:Object(A.c)(400)});case 15:if(n=c.sent,!n.cancel){c.next=19;break}return c.abrupt("return");case 19:return c.prev=19,c.next=22,Object(A.b)(P,t);case 22:return r=c.sent,c.next=25,Object(A.d)(L(t,r));case 25:c.next=30;break;case 27:c.prev=27,c.t3=c.catch(19),console.error(c.t3);case 30:return c.prev=30,c.next=33,Object(A.d)(D(!1));case 33:return c.finish(30);case 34:case"end":return c.stop()}}),J,null,[[19,27,30,34]])}function ae(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.h)(_.toString(),te);case 2:case"end":return e.stop()}}),q)}function ne(e){var t,a;return V.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return t=e.payload.id,n.next=3,Object(A.d)(E(t));case 3:return n.t0=W,n.next=6,Object(A.f)();case 6:if(n.t1=n.sent,n.t2=t,!(0,n.t0)(n.t1)[n.t2]){n.next=10;break}return n.abrupt("return");case 10:return n.prev=10,n.next=13,Object(A.b)(B,t);case 13:return a=n.sent,n.next=16,Object(A.d)(x(a));case 16:n.next=21;break;case 18:n.prev=18,n.t3=n.catch(10),console.error(n.t3);case 21:case"end":return n.stop()}}),Q,null,[[10,18]])}function re(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.h)(S.toString(),ne);case 2:case"end":return e.stop()}}),ee)}var ce=V.a.mark(ie);function ie(){return V.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(A.a)([ae(),re()]);case 2:case"end":return e.stop()}}),ce)}var oe=function(e){var t=Object(l.a)(),a=s.d,n=Object(s.e)(T,e,a(Object(s.a)(t)));return t.run(ie),n},se=a(68),le=a(159),me=a(164),ue=a(161),de=a(158),ve=a(162),be=a(152),Ee=a(160),pe=a(43),he=a(142),fe=a(143);var ge=({children:e})=>{const t=Object(he.a)();return r.a.createElement(fe.a,{appear:!1,direction:"down",in:!t},e)},Oe=a(69),Ie=a.n(Oe),ke=a(151),we=a(148),ye=a(101),je=a(49),Se=a.n(je),xe=a(146),Le=a(150),De=a(149),_e=a(163);const Ce=Object(se.a)(()=>({item:{height:48,"&:hover $deleteButton":{opacity:1}},button:{height:48},activeItem:{backgroundColor:"#EDEDED"},edit:{width:"100%"},textField:{margin:0,width:"100%"},input:{"&::before":{borderBottomColor:"transparent"}},deleteButton:{opacity:0,"&:focus":{opacity:1}}}));var Me=({active:e,deleteList:t,isNewItem:a,label:c,renameList:i,setActiveList:o})=>{const s=Ce(),l=Object(n.useRef)(null);Object(n.useEffect)(()=>{l&&l.current&&a&&l.current.focus()});return r.a.createElement(xe.a,{button:!e,ContainerProps:{className:"".concat(s.item," ").concat(e?s.activeItem:"")},classes:{button:s.button},onClick:e?void 0:o},e?r.a.createElement(me.a,{className:s.edit},r.a.createElement(_e.a,{className:s.textField,InputProps:{className:s.input},inputRef:l,onChange:e=>i(e.target.value),placeholder:"(new list)",value:c})):r.a.createElement(De.a,{primary:c||"(new list)"}),r.a.createElement(Le.a,null,r.a.createElement(ke.a,{"aria-label":"delete",className:s.deleteButton,"data-test-id":"delete-btn",edge:"end",onClick:t},r.a.createElement(Se.a,null))))};const Te=Object(se.a)(()=>({header:{display:"flex",justifyContent:"space-between",alignItems:"center"}})),Ne=({activeList:e,addList:t,deleteList:a,lists:c,renameList:i,setActiveList:o})=>{const s=Te(),l=Object(n.useRef)();return Object(n.useEffect)(()=>{l.current=c}),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:s.header},r.a.createElement(pe.a,{variant:"subtitle1"},"My lists"),r.a.createElement(ke.a,{color:"primary","data-test-id":"create-list-btn",onClick:t},r.a.createElement(Ie.a,null))),r.a.createElement(ye.a,null,r.a.createElement(we.a,{component:"nav","data-test-id":"lists-list"},c.map(({id:t,label:n})=>r.a.createElement(Me,{key:t,active:t===e,deleteList:()=>a(t),id:t,isNewItem:Boolean(l&&l.current&&l.current.every(e=>e.id!==t)),label:n,renameList:e=>i(t,e),setActiveList:()=>o(t)})))))};Ne.defaultProps={activeList:void 0};const Ve={addList:b,deleteList:p,renameList:O,setActiveList:I};var Ae=Object(o.b)(e=>({activeList:z(e),lists:U(e)}),Ve)(Ne),Fe=a(71),Re=a.n(Fe),Pe=a(70),Be=a.n(Pe),He=a(153),Ue=a(157),ze=a(156),Ge=a(154),We=a(155);const Xe=Object(se.a)(()=>({root:{overflow:"auto"},row:{height:96,"&:hover":{backgroundColor:"#EDEDED"},"&:focus-within":{backgroundColor:"#EDEDED"},"&:hover $icons":{opacity:1,backgroundColor:"#EDEDED"},"&:focus-within $icons":{opacity:1,backgroundColor:"#EDEDED"}},loading:{opacity:.4,backgroundColor:"rgba(0, 0, 0, .2)"},cell:{padding:"8px 12px"},button:{padding:6},iconCell:{position:"relative",overflow:"hidden"},icons:{position:"absolute",left:0,transform:"translate(0, calc(-50% - 1em + 4px))",display:"flex",flexDirection:"column",opacity:0}})),Ye={moveDown:h,moveUp:f,remove:g};var Ke=Object(o.b)(e=>({movies:X(e)}),Ye)(({moveDown:e,moveUp:t,movies:a,remove:n})=>{const c=Xe(),i=[{header:"#",className:c.iconCell,content:(a,i)=>r.a.createElement(r.a.Fragment,null,i+1,r.a.createElement("div",{className:c.icons},r.a.createElement(ke.a,{className:c.button,"data-test-id":"move-up-btn",onClick:()=>t(a.imdbId)},r.a.createElement(Be.a,{fontSize:"small"})),r.a.createElement(ke.a,{className:c.button,"data-test-id":"remove-btn",onClick:()=>n(a.imdbId)},r.a.createElement(Se.a,{fontSize:"small"})),r.a.createElement(ke.a,{className:c.button,"data-test-id":"move-down-btn",onClick:()=>e(a.imdbId)},r.a.createElement(Re.a,{fontSize:"small"}))))},{header:"Poster",content:e=>r.a.createElement("img",{src:e.poster,alt:"",width:"50"})},{header:"Title",content:e=>e.title},{header:"Year",content:e=>e.year},{header:"Genre",content:e=>e.genre},{header:"IMDb",content:e=>r.a.createElement(be.a,{href:"https://www.imdb.com/title/".concat(e.imdbId,"/")},e.imdbId)},{header:"Rating",content:e=>e.rating}];return r.a.createElement(ye.a,{className:c.root},r.a.createElement(He.a,{"data-test-id":"movies-table",stickyHeader:!0},r.a.createElement(Ge.a,null,r.a.createElement(We.a,null,i.map(({header:e})=>r.a.createElement(ze.a,{key:e,className:c.cell},e)))),r.a.createElement(Ue.a,null,a.map((e,t)=>r.a.createElement(We.a,{key:e.imdbId,className:"".concat(c.row," ").concat(void 0===e.title?c.loading:"")},i.map(({className:a,content:n,header:i})=>r.a.createElement(ze.a,{key:i,className:"".concat(c.cell," ").concat(a||"")},n(e,t))))))))}),Ze=a(73);const $e={fetchMovie:S,setValue:_};var Je=Object(o.b)(e=>({showSearch:G(e),isLoading:$(e),options:Z(e),value:K(e)}),$e)(({fetchMovie:e,showSearch:t,isLoading:a,options:n,setValue:c,value:i})=>{return t?r.a.createElement(me.a,{my:2,"data-test-id":"search-container"},r.a.createElement(Ze.a,{filterOption:null,isLoading:a,onChange:t=>{e(t.value)},onInputChange:e=>{c(e)},options:n,placeholder:"Add a movie",value:i})):null});const qe=Object(se.a)(()=>({content:{minHeight:"calc(100vh - ".concat(40,"px)")},footer:{height:40,display:"flex",justifyContent:"center",alignItems:"center"}}));var Qe=()=>{const e=qe();return r.a.createElement(r.a.Fragment,null,r.a.createElement(de.a,null),r.a.createElement(ge,null,r.a.createElement(le.a,null,r.a.createElement(Ee.a,null,r.a.createElement(pe.a,{variant:"h6"},"My movie lists")))),r.a.createElement("div",{className:e.content},r.a.createElement(Ee.a,null),r.a.createElement(ue.a,null,r.a.createElement(me.a,{my:2},r.a.createElement(ve.a,{container:!0,spacing:3},r.a.createElement(ve.a,{item:!0,xs:12,md:4,lg:3},r.a.createElement(Ae,null)),r.a.createElement(ve.a,{item:!0,xs:12,md:8,lg:9},r.a.createElement(Ke,null),r.a.createElement(Je,null)))))),r.a.createElement("div",{className:e.footer},r.a.createElement("p",null,"The site uses ",r.a.createElement(be.a,{href:"http://www.omdbapi.com/"},"OMDb API"),".")))};const et=oe();i.a.render(r.a.createElement(o.a,{store:et},r.a.createElement(Qe,null)),document.getElementById("root"))},85:function(e,t,a){e.exports=a(100)}},[[85,1,2]]]);
//# sourceMappingURL=main.f011965a.chunk.js.map