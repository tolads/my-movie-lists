(window["webpackJsonpmy-movie-lists"]=window["webpackJsonpmy-movie-lists"]||[]).push([[0],{100:function(e,t,a){"use strict";a.r(t);var i=a(0),n=a.n(i),c=a(12),o=a.n(c),l=a(29),r=a(26),s=a(68),m=a(76),d=a(44),v=a(164);const E=Object(v.a)({ADD_LIST:()=>({id:Date.now()}),RENAME_LIST:(e,t)=>({id:e,label:t}),DELETE_LIST:e=>({id:e}),SET_ACTIVE_LIST:e=>({id:e}),ADD_MOVIE_TO_ACTIVE_LIST:e=>({movieId:e}),REMOVE_MOVIE_FROM_ACTIVE_LIST:e=>({movieId:e}),MOVE_MOVIE_UP_IN_ACTIVE_LIST:e=>({movieId:e}),MOVE_MOVIE_DOWN_IN_ACTIVE_LIST:e=>({movieId:e})}),u=E.addList,b=E.addMovieToActiveList,h=E.deleteList,p=E.moveMovieDownInActiveList,g=E.moveMovieUpInActiveList,y=E.removeMovieFromActiveList,I=E.renameList,O=E.setActiveList,f=Date.now(),S={items:[{id:f,label:"Favourites",movies:["tt0111161"]},{id:2,label:"Watchlist",movies:[]}],active:f};var j=Object(d.a)((e=S,t)=>{const a=t.payload,i=t.type,n=e.items.find(t=>t.id===e.active);switch(i){case u.toString():e.active=a.id,e.items.push({id:a.id,label:"",movies:[]});break;case I.toString():e.items.find(e=>e.id===a.id).label=a.label;break;case h.toString():e.items=e.items.filter(e=>e.id!==a.id),e.active===a.id&&(e.active=e.items.length?e.items[0].id:void 0);break;case O.toString():e.active=a.id;break;case b.toString():n.movies.every(e=>e!==a.movieId)&&n.movies.push(a.movieId);break;case y.toString():n.movies=n.movies.filter(e=>e!==a.movieId);break;case g.toString():{const e=n.movies,t=e.indexOf(a.movieId);n.movies=0===t?[...e.slice(1),e[0]]:[...e.slice(0,t-1),e[t],e[t-1],...e.slice(t+1)];break}case p.toString():{const e=n.movies,t=e.indexOf(a.movieId);t===e.length-1?n.movies=[e[e.length-1],...e.slice(0,-1)]:n.movies=[...e.slice(0,t),e[t+1],e[t],...e.slice(t+2)];break}default:return e}});const k=Object(v.a)({SET_IS_SEARCH_FETCHING:e=>({isFetching:e}),MOVIE_SEARCH_RESULT_RECEIVED:(e,t)=>({key:e,movies:t}),MOVIE_RECEIVED:e=>({movie:e}),SET_SEARCH_VALUE:e=>({value:e}),FETCH_MOVIE:e=>({id:e})}),w=k.fetchMovie,L=k.movieReceived,_=k.movieSearchResultReceived,D=k.setIsSearchFetching,C=k.setSearchValue,M={items:{tt0111161:{poster:"https://m.media-amazon.com/images/M/MV5BMDFkYTc0MGEtZmNhMC00ZDIzLWFmNTEtODM1ZmRlYWMwMWFmXkEyXkFqcGdeQXVyMTMxODk2OTU@._V1_SX300.jpg",title:"The Shawshank Repemption",year:"1994",genre:"Drama",imdbId:"tt0111161",rating:"9.3"}},searchKeys:{},currentSearchValue:"",isSearchFetching:!1};var T=Object(d.a)((e=M,t)=>{const a=t.payload;switch(t.type){case D.toString():e.isSearchFetching=a.isFetching;break;case _.toString():e.searchKeys[a.key]=a.movies;break;case L.toString():e.items[a.movie.imdbId]=a.movie;break;case C.toString():e.currentSearchValue=a.value;break;default:return e}}),N=Object(r.c)({lists:j,movies:T}),V=a(18);const A=Object({NODE_ENV:"production",PUBLIC_URL:"/my-movie-lists"}).REACT_APP_OMDB_API_KEY||"de26953c",R=e=>window.fetch(e).then(e=>e.ok?e.json():Promise.reject(e)),F=e=>({genre:e.Genre,imdbId:e.imdbID,poster:e.Poster,rating:e.imdbRating,title:e.Title,year:e.Year}),x=e=>R("http://www.omdbapi.com/?apikey=".concat(A,"&type=movie&s=").concat(e)).then(({Search:e})=>e?e.map(F):[]),P=e=>R("http://www.omdbapi.com/?apikey=".concat(A,"&type=movie&i=").concat(e)).then(F);var B=a(69);const U=e=>e.lists.items,H=e=>e.lists.active,z=e=>e.movies.items,G=Object(B.a)(U,H,z,(e,t,a)=>void 0===t?[]:e.find(({id:e})=>e===t).movies.map(e=>{return a[e]||{imdbId:e}})),W=(e,{key:t})=>e.movies.searchKeys[t],Y=e=>e.movies.currentSearchValue,K=e=>{const t=Y(e),a=W(e,{key:t.trim()});return a?a.map(({title:e,year:t,imdbId:a})=>({value:a,label:"".concat(e," (").concat(t,")")})):[]},X=e=>e.movies.isSearchFetching;function*Z(e){const t=e.payload.value.trim(),a=W(yield Object(V.f)(),{key:t});if(t.length<3||a)yield Object(V.d)(D(!1));else if(yield Object(V.d)(D(!0)),!(yield Object(V.e)({cancel:Object(V.g)(e.type),timeout:Object(V.c)(400)})).cancel)try{const e=yield Object(V.b)(x,t);yield Object(V.d)(_(t,e))}catch(i){console.error(i)}finally{yield Object(V.d)(D(!1))}}function*$(){yield Object(V.h)(C.toString(),Z)}function*J(e){const t=e.payload.id;if(yield Object(V.d)(b(t)),!z(yield Object(V.f)())[t])try{const e=yield Object(V.b)(P,t);yield Object(V.d)(L(e))}catch(a){console.error(a)}}function*q(){yield Object(V.h)(w.toString(),J)}function*Q(){yield Object(V.a)([$(),q()])}var ee=e=>{const t=Object(m.a)(),a=Object(s.createLogger)({collapsed:!0}),i=Object(r.e)(N,e,Object(r.a)(t,a));return t.run(Q),i},te=a(70),ae=a(158),ie=a(163),ne=a(160),ce=a(157),oe=a(161),le=a(151),re=a(159),se=a(41),me=a(142),de=a(143);var ve=({children:e})=>{const t=Object(me.a)();return n.a.createElement(de.a,{appear:!1,direction:"down",in:!t},e)},Ee=a(71),ue=a.n(Ee),be=a(150),he=a(147),pe=a(101),ge=a(47),ye=a.n(ge),Ie=a(145),Oe=a(149),fe=a(148),Se=a(162);const je=Object(te.a)(()=>({item:{height:48,"&:hover $deleteButton":{opacity:1}},button:{height:48},activeItem:{backgroundColor:"#EDEDED"},edit:{width:"100%"},textField:{margin:0,width:"100%"},input:{"&::before":{borderBottomColor:"transparent"}},deleteButton:{opacity:0,"&:focus":{opacity:1}}}));var ke=({active:e,deleteList:t,isNewItem:a,label:c,renameList:o,setActiveList:l})=>{const r=je(),s=Object(i.useRef)(null);Object(i.useEffect)(()=>{s&&s.current&&a&&s.current.focus()});return n.a.createElement(Ie.a,{button:!e,ContainerProps:{className:"".concat(r.item," ").concat(e?r.activeItem:"")},classes:{button:r.button},onClick:e?void 0:l},e?n.a.createElement(ie.a,{className:r.edit},n.a.createElement(Se.a,{className:r.textField,InputProps:{className:r.input},inputRef:s,onChange:e=>o(e.target.value),placeholder:"(new list)",value:c})):n.a.createElement(fe.a,{primary:c||"(new list)"}),n.a.createElement(Oe.a,null,n.a.createElement(be.a,{"aria-label":"delete",className:r.deleteButton,edge:"end",onClick:t},n.a.createElement(ye.a,null))))};const we=Object(te.a)(()=>({header:{display:"flex",justifyContent:"space-between",alignItems:"center"}})),Le=({activeList:e,addList:t,deleteList:a,lists:c,renameList:o,setActiveList:l})=>{const r=we(),s=Object(i.useRef)();return Object(i.useEffect)(()=>{s.current=c}),n.a.createElement(n.a.Fragment,null,n.a.createElement("div",{className:r.header},n.a.createElement(se.a,{variant:"subtitle1"},"My lists"),n.a.createElement(be.a,{color:"primary",onClick:t},n.a.createElement(ue.a,null))),n.a.createElement(pe.a,null,n.a.createElement(he.a,{component:"nav"},c.map(({id:t,label:i})=>n.a.createElement(ke,{key:t,active:t===e,deleteList:()=>a(t),id:t,isNewItem:Boolean(s&&s.current&&s.current.every(e=>e.id!==t)),label:i,renameList:e=>o(t,e),setActiveList:()=>l(t)})))))};Le.defaultProps={activeList:void 0};const _e={addList:u,deleteList:h,renameList:I,setActiveList:O};var De=Object(l.b)(e=>({activeList:H(e),lists:U(e)}),_e)(Le),Ce=a(73),Me=a.n(Ce),Te=a(72),Ne=a.n(Te),Ve=a(152),Ae=a(156),Re=a(155),Fe=a(153),xe=a(154);const Pe=Object(te.a)(()=>({root:{overflow:"auto"},row:{height:96,"&:hover":{backgroundColor:"#EDEDED"},"&:focus-within":{backgroundColor:"#EDEDED"},"&:hover $icons":{opacity:1,backgroundColor:"#EDEDED"},"&:focus-within $icons":{opacity:1,backgroundColor:"#EDEDED"}},loading:{opacity:.4,backgroundColor:"rgba(0, 0, 0, .2)"},cell:{padding:"8px 12px"},button:{padding:6},iconCell:{position:"relative",overflow:"hidden"},icons:{position:"absolute",left:0,transform:"translate(0, calc(-50% - 1em + 4px))",display:"flex",flexDirection:"column",opacity:0}})),Be={moveDown:p,moveUp:g,remove:y};var Ue=Object(l.b)(e=>({movies:G(e)}),Be)(({moveDown:e,moveUp:t,movies:a,remove:i})=>{const c=Pe(),o=[{header:"#",className:c.iconCell,content:(a,o)=>n.a.createElement(n.a.Fragment,null,o+1,n.a.createElement("div",{className:c.icons},n.a.createElement(be.a,{className:c.button,onClick:()=>t(a.imdbId)},n.a.createElement(Ne.a,{fontSize:"small"})),n.a.createElement(be.a,{className:c.button,onClick:()=>i(a.imdbId)},n.a.createElement(ye.a,{fontSize:"small"})),n.a.createElement(be.a,{className:c.button,onClick:()=>e(a.imdbId)},n.a.createElement(Me.a,{fontSize:"small"}))))},{header:"Poster",content:e=>n.a.createElement("img",{src:e.poster,alt:"",width:"50"})},{header:"Title",content:e=>e.title},{header:"Year",content:e=>e.year},{header:"Genre",content:e=>e.genre},{header:"IMDb",content:e=>n.a.createElement(le.a,{href:"https://www.imdb.com/title/".concat(e.imdbId,"/")},e.imdbId)},{header:"Rating",content:e=>e.rating}];return n.a.createElement(pe.a,{className:c.root},n.a.createElement(Ve.a,{stickyHeader:!0},n.a.createElement(Fe.a,null,n.a.createElement(xe.a,null,o.map(({header:e})=>n.a.createElement(Re.a,{key:e,className:c.cell},e)))),n.a.createElement(Ae.a,null,a.map((e,t)=>n.a.createElement(xe.a,{key:e.imdbId,className:"".concat(c.row," ").concat(void 0===e.title?c.loading:"")},o.map(({className:a,content:i,header:o})=>n.a.createElement(Re.a,{key:o,className:"".concat(c.cell," ").concat(a||"")},i(e,t))))))))}),He=a(75);const ze={fetchMovie:w,setValue:C};var Ge=Object(l.b)(e=>({isLoading:X(e),options:K(e),value:Y(e)}),ze)(({fetchMovie:e,isLoading:t,options:a,setValue:i,value:c})=>{return n.a.createElement(ie.a,{my:2},n.a.createElement(He.a,{filterOption:null,isLoading:t,onChange:t=>{e(t.value)},onInputChange:e=>{i(e)},options:a,placeholder:"Add a movie",value:c}))});const We=Object(te.a)(()=>({content:{minHeight:"calc(100vh - ".concat(40,"px)")},footer:{height:40,display:"flex",justifyContent:"center",alignItems:"center"}}));var Ye=()=>{const e=We();return n.a.createElement(n.a.Fragment,null,n.a.createElement(ce.a,null),n.a.createElement(ve,null,n.a.createElement(ae.a,null,n.a.createElement(re.a,null,n.a.createElement(se.a,{variant:"h6"},"My movie lists")))),n.a.createElement("div",{className:e.content},n.a.createElement(re.a,null),n.a.createElement(ne.a,null,n.a.createElement(ie.a,{my:2},n.a.createElement(oe.a,{container:!0,spacing:3},n.a.createElement(oe.a,{item:!0,xs:12,md:4,lg:3},n.a.createElement(De,null)),n.a.createElement(oe.a,{item:!0,xs:12,md:8,lg:9},n.a.createElement(Ue,null),n.a.createElement(Ge,null)))))),n.a.createElement("div",{className:e.footer},n.a.createElement("p",null,"The site uses ",n.a.createElement(le.a,{href:"http://www.omdbapi.com/"},"OMDb API"),".")))};const Ke=ee();o.a.render(n.a.createElement(l.a,{store:Ke},n.a.createElement(Ye,null)),document.getElementById("root"))},87:function(e,t,a){e.exports=a(100)}},[[87,1,2]]]);
//# sourceMappingURL=main.ead52e61.chunk.js.map